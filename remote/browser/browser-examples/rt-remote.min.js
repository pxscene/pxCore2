(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.RTRemote=f()}})(function(){var define,module,exports;return function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r}()({1:[function(require,module,exports){const helper=require("./lib/common/helper");const logger=require("./lib/common/logger");const RTConst=require("./lib/RTConst");const RTRemoteConnectionManager=require("./lib/RTRemoteConnectionManager");const RTRemoteMessageType=require("./lib/RTRemoteMessageType");const RTRemoteObject=require("./lib/RTRemoteObject");const RTStatusCode=require("./lib/RTStatusCode");const RTValueType=require("./lib/RTValueType");const RTValueHelper=require("./lib/RTValueHelper");const BigNumber=require("bignumber.js");module.exports={helper:helper,logger:logger,RTConst:RTConst,RTRemoteMessageType:RTRemoteMessageType,RTRemoteObject:RTRemoteObject,RTRemoteConnectionManager:RTRemoteConnectionManager,RTValueType:RTValueType,RTValueHelper:RTValueHelper,RTStatusCode:RTStatusCode,BigNumber:BigNumber}},{"./lib/RTConst":2,"./lib/RTRemoteConnectionManager":7,"./lib/RTRemoteMessageType":8,"./lib/RTRemoteObject":9,"./lib/RTStatusCode":13,"./lib/RTValueHelper":14,"./lib/RTValueType":15,"./lib/common/helper":16,"./lib/common/logger":17,"bignumber.js":19}],2:[function(require,module,exports){module.exports={FUNCTION_KEY:"function.name",FUNCTION_GLOBAL_SCOPE:"global",CORRELATION_KEY:"correlation.key",OBJECT_ID_KEY:"object.id",PROPERTY_NAME:"property.name",FUNCTION_ARGS:"function.args",STATUS_MESSAGE:"status.message",MESSAGE_TYPE:"message.type",KEEP_ALIVE_IDS:"keep_alive.ids",FUNCTION_RETURN_VALUE:"function.return_value",SERVER_MODE:"SERVER_MODE",CLIENT_MODE:"CLIENT_MODE",TYPE:"type",SENDER_ID:"sender.id",REPLY_TO:"reply-to",ENDPOINT:"endpoint",STATUS_CODE:"status.code",VALUE:"value",UNKNOWN_CODE:"UNKNOWN CODE",UNKNOWN_TYPE:"UNKNOWN TYPE",UNKNOWN_MESSAGE_TYPE:"UNKNOWN MESSAGE TYPE",PROPERTY_INDEX:"property.index",REQUEST_TIMEOUT:10*1e3}},{}],3:[function(require,module,exports){const rtFunctionMap={};const rtObjectMap={};module.exports={getRtFunctionMap:()=>rtFunctionMap,getRtObjectMap:()=>rtObjectMap}},{}],4:[function(require,module,exports){class RTException extends Error{constructor(message){super();this.message=message}}module.exports=RTException},{}],5:[function(require,module,exports){const RTConst=require("./RTConst");const helper=require("./common/helper");const RTRemoteMessageType=require("./RTRemoteMessageType");const RTValueHelper=require("./RTValueHelper");const RTValueType=require("./RTValueType");function newLocateRequest(objectId,replyTo){const locateObj={};locateObj[RTConst.MESSAGE_TYPE]=RTRemoteMessageType.SEARCH_OBJECT;locateObj[RTConst.CORRELATION_KEY]=helper.getRandomUUID();locateObj[RTConst.OBJECT_ID_KEY]=objectId;locateObj[RTConst.SENDER_ID]=0;locateObj[RTConst.REPLY_TO]=replyTo;return locateObj}function newLocateResponse(endpoint,objectId,senderId,correlationKey){const response={};response[RTConst.ENDPOINT]=endpoint;response[RTConst.OBJECT_ID_KEY]=objectId;response[RTConst.SENDER_ID]=senderId;response[RTConst.CORRELATION_KEY]=correlationKey;response[RTConst.MESSAGE_TYPE]=RTRemoteMessageType.LOCATE_OBJECT;return response}function newSetRequest(objectId,propName,rtValue){const setRequestObj={};setRequestObj[RTConst.MESSAGE_TYPE]=RTRemoteMessageType.SET_PROPERTY_BYNAME_REQUEST;setRequestObj[RTConst.CORRELATION_KEY]=helper.getRandomUUID();setRequestObj[RTConst.OBJECT_ID_KEY]=objectId;if(propName){setRequestObj[RTConst.PROPERTY_NAME]=propName}setRequestObj[RTConst.VALUE]=rtValue;return setRequestObj}function newGetRequest(objectId,propName){const getRequestObj={};getRequestObj[RTConst.MESSAGE_TYPE]=RTRemoteMessageType.GET_PROPERTY_BYNAME_REQUEST;getRequestObj[RTConst.CORRELATION_KEY]=helper.getRandomUUID();getRequestObj[RTConst.OBJECT_ID_KEY]=objectId;if(propName){getRequestObj[RTConst.PROPERTY_NAME]=propName}return getRequestObj}function newCallMethodRequest(objectId,methodName,...args){const callRequestObj={};callRequestObj[RTConst.MESSAGE_TYPE]=RTRemoteMessageType.METHOD_CALL_REQUEST;callRequestObj[RTConst.CORRELATION_KEY]=helper.getRandomUUID();callRequestObj[RTConst.OBJECT_ID_KEY]=objectId;callRequestObj[RTConst.FUNCTION_KEY]=methodName;callRequestObj[RTConst.FUNCTION_ARGS]=args;return callRequestObj}function newCallResponse(correlationKey,returnValue,statusCode){const callResponseObj={};callResponseObj[RTConst.MESSAGE_TYPE]=RTRemoteMessageType.METHOD_CALL_RESPONSE;callResponseObj[RTConst.CORRELATION_KEY]=correlationKey;callResponseObj[RTConst.STATUS_CODE]=statusCode;callResponseObj[RTConst.FUNCTION_RETURN_VALUE]=returnValue||RTValueHelper.create(null,RTValueType.VOID);return callResponseObj}function newKeepAliveResponse(correlationKey,statusCode){const keepAliveReponseObj={};keepAliveReponseObj[RTConst.MESSAGE_TYPE]=RTRemoteMessageType.KEEP_ALIVE_RESPONSE;keepAliveReponseObj[RTConst.CORRELATION_KEY]=correlationKey;keepAliveReponseObj[RTConst.STATUS_CODE]=statusCode;return keepAliveReponseObj}function newSetPropertyResponse(correlationKey,statusCode,objectId){const setResponse={};setResponse[RTConst.MESSAGE_TYPE]=RTRemoteMessageType.SET_PROPERTY_BYNAME_RESPONSE;setResponse[RTConst.CORRELATION_KEY]=correlationKey;setResponse[RTConst.STATUS_CODE]=statusCode;setResponse[RTConst.OBJECT_ID_KEY]=objectId;return setResponse}function newGetPropertyResponse(correlationKey,statusCode,objectId,value){const getResponse={};getResponse[RTConst.MESSAGE_TYPE]=RTRemoteMessageType.GET_PROPERTY_BYNAME_RESPONSE;getResponse[RTConst.CORRELATION_KEY]=correlationKey;getResponse[RTConst.STATUS_CODE]=statusCode;getResponse[RTConst.OBJECT_ID_KEY]=objectId;getResponse[RTConst.VALUE]=value;return getResponse}function newOpenSessionResponse(correlationKey,objectId){const response={};response[RTConst.MESSAGE_TYPE]=RTRemoteMessageType.SESSION_OPEN_RESPIONSE;response[RTConst.CORRELATION_KEY]=correlationKey;response[RTConst.OBJECT_ID_KEY]=objectId;return response}module.exports={newLocateRequest:newLocateRequest,newLocateResponse:newLocateResponse,newSetRequest:newSetRequest,newGetRequest:newGetRequest,newCallMethodRequest:newCallMethodRequest,newCallResponse:newCallResponse,newKeepAliveResponse:newKeepAliveResponse,newSetPropertyResponse:newSetPropertyResponse,newGetPropertyResponse:newGetPropertyResponse,newOpenSessionResponse:newOpenSessionResponse}},{"./RTConst":2,"./RTRemoteMessageType":8,"./RTValueHelper":14,"./RTValueType":15,"./common/helper":16}],6:[function(require,module,exports){const RTRemoteWBTransport=require("./RTRemoteWBTransport");const RTRemoteObject=require("./RTRemoteObject");const RTRemoteProtocol=require("./RTRemoteProtocol");class RTRemoteClientConnection{constructor(protocol){this.protocol=protocol}getProxyObject(objectId){return new RTRemoteObject(this.protocol,objectId)}}function createWBClientConnection(uri){const transport=new RTRemoteWBTransport(uri);return RTRemoteProtocol.create(transport,false).then(protocol=>new RTRemoteClientConnection(protocol))}module.exports={createWBClientConnection:createWBClientConnection}},{"./RTRemoteObject":9,"./RTRemoteProtocol":10,"./RTRemoteWBTransport":12}],7:[function(require,module,exports){const logger=require("./common/logger");const RTRemoteClientConnection=require("./RTRemoteClientConnection");const RTException=require("./RTException");const connections={};function getObjectProxy(uri,objectName){const connectionSpec=uri;const getRemoteObject=(conn,name)=>conn.getProxyObject(name);if(connections[connectionSpec]&&connections[connectionSpec].protocol.transport.mRunning){return Promise.resolve(getRemoteObject(connections[connectionSpec],objectName))}return createConnectionFromSpec(uri).then(connection=>{connections[connectionSpec]=connection;return Promise.resolve(getRemoteObject(connection,objectName))})}function createConnectionFromSpec(uri){let connection=null;logger.info(`start connection ${uri}`);const schema=uri.split("://")[0];switch(schema){case"ws":connection=RTRemoteClientConnection.createWBClientConnection(uri);break;default:throw new RTException(`unsupported scheme : ${schema}`)}return connection}module.exports={getObjectProxy:getObjectProxy}},{"./RTException":4,"./RTRemoteClientConnection":6,"./common/logger":17}],8:[function(require,module,exports){module.exports={SESSION_OPEN_REQUEST:"session.open.request",SESSION_OPEN_RESPIONSE:"session.open.response",GET_PROPERTY_BYNAME_REQUEST:"get.byname.request",GET_PROPERTY_BYNAME_RESPONSE:"get.byname.response",SET_PROPERTY_BYNAME_REQUEST:"set.byname.request",SET_PROPERTY_BYNAME_RESPONSE:"set.byname.response",GET_PROPERTY_BYINDEX_REQUEST:"get.byindex.request",GET_PROPERTY_BYINDEX_RESPONSE:"get.byindex.response",SET_PROPERTY_BYINDEX_REQUEST:"set.byindex.request",SET_PROPERTY_BYINDEX_RESPONSE:"set.byindex.response",KEEP_ALIVE_REQUEST:"keep_alive.request",KEEP_ALIVE_RESPONSE:"keep_alive.response",METHOD_CALL_RESPONSE:"method.call.response",METHOD_CALL_REQUEST:"method.call.request",SEARCH_OBJECT:"search",LOCATE_OBJECT:"locate"}},{}],9:[function(require,module,exports){class RTRemoteObject{constructor(protocol,objectId){this.protocol=protocol;this.id=objectId}set(prop,value){if(typeof prop==="number"){return this.protocol.sendSetByIndex(this.id,prop,value)}return this.protocol.sendSetByName(this.id,prop,value)}get(prop){if(typeof prop==="number"){return this.protocol.sendGetByIndex(this.id,prop)}return this.protocol.sendGetByName(this.id,prop)}send(name,...args){return this.protocol.sendCallByName(this.id,name,...args)}sendReturns(name,...args){return this.protocol.sendCallByName(this.id,name,...args)}}module.exports=RTRemoteObject},{}],10:[function(require,module,exports){const RTMessageHelper=require("./RTMessageHelper");const RTConst=require("./RTConst");const RTStatusCode=require("./RTStatusCode");const RTRemoteSerializer=require("./RTRemoteSerializer");const RTEnvironment=require("./RTEnvironment");const RTRemoteMessageType=require("./RTRemoteMessageType");const RTRemoteObject=require("./RTRemoteObject");const RTException=require("./RTException");const helper=require("./common/helper");const logger=require("./common/logger");class RTRemoteProtocol{constructor(transport,transportOpened){this.transport=transport;this.transportOpened=transportOpened;this.mRunning=false;this.futures={}}init(){return new Promise((resolve,reject)=>{if(!this.transportOpened){this.transport.open().then(()=>{this.mRunning=true;this.start();resolve(this)}).catch(err=>reject(err))}else{this.mRunning=true;this.start();resolve(this)}})}start(){const that=this;this.transport.socket.onmessage=(evt=>{that.incomeMessage(RTRemoteSerializer.fromString(evt.data))})}incomeMessage(message){const key=message[RTConst.CORRELATION_KEY];const callContext=this.futures[key];if(callContext){if(callContext.expired){}else{clearTimeout(callContext.timeoutHandler)}if(message[RTConst.STATUS_CODE]!==RTStatusCode.OK){callContext.reject(helper.getStatusStringByCode(message[RTConst.STATUS_CODE]))}else{this.injectProtocolToMessageObjectValue(message);callContext.resolve(message[RTConst.VALUE]||message[RTConst.FUNCTION_RETURN_VALUE])}}else if(message[RTConst.MESSAGE_TYPE]===RTRemoteMessageType.KEEP_ALIVE_REQUEST){this.transport.send(RTRemoteSerializer.toString(RTMessageHelper.newKeepAliveResponse(message[RTConst.CORRELATION_KEY],RTStatusCode.OK)))}else if(message[RTConst.MESSAGE_TYPE]===RTRemoteMessageType.KEEP_ALIVE_RESPONSE){}else if(message[RTConst.MESSAGE_TYPE]===RTRemoteMessageType.SESSION_OPEN_REQUEST){this.transport.send(RTRemoteSerializer.toString(RTMessageHelper.newOpenSessionResponse(message[RTConst.CORRELATION_KEY],message[RTConst.OBJECT_ID_KEY])))}else{this.processMessageInClientMode(message)}}injectProtocolToMessageObjectValue(message){const injectProtocol=rv=>{if(rv&&rv.value instanceof RTRemoteObject){rv.value.protocol=this}};const type=message[RTConst.MESSAGE_TYPE];if(type===RTRemoteMessageType.GET_PROPERTY_BYINDEX_RESPONSE||type===RTRemoteMessageType.GET_PROPERTY_BYNAME_RESPONSE){injectProtocol(message[RTConst.VALUE])}else if(type===RTRemoteMessageType.METHOD_CALL_REQUEST){const args=message[RTConst.FUNCTION_ARGS];if(args&&args.length>0){args.forEach(arg=>injectProtocol(arg))}}}processMessageInClientMode(message){if(message[RTConst.MESSAGE_TYPE]===RTRemoteMessageType.METHOD_CALL_REQUEST){const functionCb=RTEnvironment.getRtFunctionMap()[message[RTConst.FUNCTION_KEY]];if(functionCb){this.injectProtocolToMessageObjectValue(message);functionCb(message[RTConst.FUNCTION_ARGS])}this.sendCallResponse(message[RTConst.CORRELATION_KEY])}else{logger.error(`unexpected message ${message}`)}}sendCallResponse(correlationKey){this.transport.send(RTRemoteSerializer.toString(RTMessageHelper.newCallResponse(correlationKey,null,RTStatusCode.OK)))}sendSetByName(objectId,propName,value){const messageObj=RTMessageHelper.newSetRequest(objectId,propName,value);return this.sendRequestMessage(messageObj)}sendSetByIndex(objectId,index,value){const messageObj=RTMessageHelper.newSetRequest(objectId,null,value);messageObj[RTConst.MESSAGE_TYPE]=RTRemoteMessageType.SET_PROPERTY_BYINDEX_REQUEST;messageObj[RTConst.PROPERTY_INDEX]=index;return this.sendRequestMessage(messageObj)}sendCallByName(objectId,methodName,...args){const messageObj=RTMessageHelper.newCallMethodRequest(objectId,methodName,...args);return this.sendRequestMessage(messageObj)}sendRequestMessage(messageObj){const callContext={};this.futures[messageObj[RTConst.CORRELATION_KEY]]=callContext;this.transport.send(RTRemoteSerializer.toString(messageObj));return new Promise((resolve,reject)=>{callContext.resolve=resolve;callContext.reject=reject;callContext.expired=false;callContext.timeoutHandler=setTimeout(()=>{callContext.expired=true;reject(new RTException(helper.getStatusStringByCode(RTStatusCode.TIMEOUT)))},RTConst.REQUEST_TIMEOUT)})}sendGetByName(objectId,propName){const messageObj=RTMessageHelper.newGetRequest(objectId,propName);return this.sendRequestMessage(messageObj)}sendGetByIndex(objectId,index){const messageObj=RTMessageHelper.newGetRequest(objectId,null);messageObj[RTConst.MESSAGE_TYPE]=RTRemoteMessageType.GET_PROPERTY_BYINDEX_REQUEST;messageObj[RTConst.PROPERTY_INDEX]=index;return this.sendRequestMessage(messageObj)}}function create(transport,transportOpened){const protocol=new RTRemoteProtocol(transport,transportOpened);return protocol.init()}module.exports={create:create}},{"./RTConst":2,"./RTEnvironment":3,"./RTException":4,"./RTMessageHelper":5,"./RTRemoteMessageType":8,"./RTRemoteObject":9,"./RTRemoteSerializer":11,"./RTStatusCode":13,"./common/helper":16,"./common/logger":17}],11:[function(require,module,exports){const RTConst=require("./RTConst");const RTValueType=require("./RTValueType");const RTEnvironment=require("./RTEnvironment");const RTRemoteObject=require("./RTRemoteObject");const RTRemoteMessageType=require("./RTRemoteMessageType");const helper=require("./common/helper");const JSONbig=require("json-bigint");function toString(messageObj){return JSONbig.stringify(messageObj)}function processRTValue(rtValue){if(!rtValue)return;const valueType=rtValue[RTConst.TYPE];if(valueType===RTValueType.FUNCTION){if(!rtValue[RTConst.VALUE]){rtValue[RTConst.VALUE]={};rtValue[RTConst.VALUE][RTConst.FUNCTION_KEY]=rtValue[RTConst.FUNCTION_KEY];rtValue[RTConst.VALUE][RTConst.OBJECT_ID_KEY]=rtValue[RTConst.OBJECT_ID_KEY]}const functionCb=RTEnvironment.getRtFunctionMap()[rtValue[RTConst.VALUE][RTConst.FUNCTION_KEY]];if(functionCb){rtValue.value.value=functionCb}}else if(valueType===RTValueType.OBJECT){const obj=RTEnvironment.getRtObjectMap()[rtValue[RTConst.VALUE][RTConst.OBJECT_ID_KEY]];if(obj){rtValue[RTConst.VALUE]=obj}else{rtValue[RTConst.VALUE]=new RTRemoteObject(null,rtValue[RTConst.VALUE][RTConst.OBJECT_ID_KEY])}}else if(valueType===RTValueType.VOIDPTR){rtValue[RTConst.VALUE]=rtValue[RTConst.VALUE]||rtValue.Value}else if(valueType===RTValueType.FLOAT||valueType===RTValueType.DOUBLE){const v=rtValue[RTConst.VALUE];rtValue[RTConst.VALUE]=helper.isBigNumber(v)?v.toNumber():v}}function fromString(messageString){const messageObj=JSONbig.parse(messageString);const mType=messageObj[RTConst.MESSAGE_TYPE];switch(mType){case RTRemoteMessageType.SET_PROPERTY_BYNAME_REQUEST:case RTRemoteMessageType.SET_PROPERTY_BYNAME_RESPONSE:case RTRemoteMessageType.GET_PROPERTY_BYNAME_RESPONSE:case RTRemoteMessageType.GET_PROPERTY_BYNAME_REQUEST:{processRTValue(messageObj[RTConst.VALUE]);break}case RTRemoteMessageType.METHOD_CALL_REQUEST:{const args=messageObj[RTConst.FUNCTION_ARGS]||[];args.forEach(arg=>processRTValue(arg));break}case RTRemoteMessageType.METHOD_CALL_RESPONSE:{processRTValue(messageObj[RTConst.FUNCTION_RETURN_VALUE]);break}default:{break}}return messageObj}module.exports={toString:toString,fromString:fromString}},{"./RTConst":2,"./RTEnvironment":3,"./RTRemoteMessageType":8,"./RTRemoteObject":9,"./RTValueType":15,"./common/helper":16,"json-bigint":20}],12:[function(require,module,exports){const logger=require("./common/logger");const RTException=require("./RTException");class RTRemoteWBTransport{constructor(uri){this.uri=null;this.socket=null;this.mRunning=true;this.closeCallBack=[];if(typeof uri==="string"){this.uri=uri}else{this.socket=uri}}open(){return new Promise((resolve,reject)=>{const transport=this;this.socket=new WebSocket(this.uri);this.socket.onopen=(()=>{logger.info("new web socket connection to uri");resolve(transport)});this.socket.onclose=(evt=>{this.mRunning=false;for(let i=0;i<this.closeCallBack.length;i+=1){if(this.closeCallBack[i]){this.closeCallBack[i](evt)}}logger.info("a connection closed")});this.socket.onerror=(err=>{logger.error(err);if(transport.mRunning){transport.socket.close()}reject(new RTException(err))})})}send(objectString){if(this.mRunning){this.socket.send(objectString)}else{throw new RTException("cannot send because of transport mRunning = false")}}on(event,cb){if(event==="close"){this.closeCallBack.push(cb)}}}module.exports=RTRemoteWBTransport},{"./RTException":4,"./common/logger":17}],13:[function(require,module,exports){module.exports={UNKNOWN:-1,OK:0,ERROR:1,FAIL:1,NOT_ENOUGH_ARGUMENTS:2,INVALID_ARGUMENT:3,PROP_NOT_FOUND:4,OBJECT_NOT_INITIALIZED:5,PROPERTY_NOT_FOUND:6,OBJECT_NO_LONGER_AVAILABLE:7,RESOURCE_NOT_FOUND:8,NO_CONNECTION:9,NOT_IMPLEMENTED:10,TYPE_MISMATCH:11,NOT_ALLOWED:12,TIMEOUT:1e3,DUPLICATE_ENTRY:1001,OBJECT_NOT_FOUND:1002,PROTOCOL_ERROR:1003,INVALID_OPERATION:1004,IN_PROGRESS:1005,QUEUE_EMPTY:1006,STREAM_CLOSED:1007}},{}],14:[function(require,module,exports){const RTEnvironment=require("./RTEnvironment");const RTValueType=require("./RTValueType");const RTConst=require("./RTConst");const helper=require("./common/helper");const RTException=require("./RTException");function create(value,type){const rtValue={value:value,type:type};switch(type){case RTValueType.FUNCTION:{if(value){const functionName=`func://${helper.getRandomUUID()}`;const v={};v[RTConst.FUNCTION_KEY]=functionName;v[RTConst.OBJECT_ID_KEY]=RTConst.FUNCTION_GLOBAL_SCOPE;v[RTConst.VALUE]=value;rtValue[RTConst.VALUE]=v;RTEnvironment.getRtFunctionMap()[functionName]=value}break}case RTValueType.OBJECT:{if(value){const objectId=`obj://${helper.getRandomUUID()}`;rtValue[RTConst.VALUE]={};rtValue[RTConst.VALUE][RTConst.OBJECT_ID_KEY]=objectId;value[RTConst.OBJECT_ID_KEY]=objectId;RTEnvironment.getRtObjectMap()[objectId]=value}break}case RTValueType.INT64:case RTValueType.UINT64:{if(value&&typeof value!=="object"){throw new RTException(`INT64/UINT64 cannot initialize with type ${typeof value}, only can use BigNumber initialize`)}break}default:break}return rtValue}module.exports={create:create}},{"./RTConst":2,"./RTEnvironment":3,"./RTException":4,"./RTValueType":15,"./common/helper":16}],15:[function(require,module,exports){module.exports={VOID:0,VALUE:118,BOOLEAN:98,INT8:49,UINT8:50,INT32:52,UINT32:53,INT64:54,UINT64:55,FLOAT:101,DOUBLE:100,STRING:115,OBJECT:111,FUNCTION:102,VOIDPTR:122}},{}],16:[function(require,module,exports){const uuidV4=require("uuid/v4");const RTStatusCode=require("../RTStatusCode");const RTValueType=require("../RTValueType");const RTConst=require("../RTConst");function getRandomUUID(){return uuidV4()}function getStatusStringByCode(statusCode){for(const key in RTStatusCode){if(RTStatusCode[key]===statusCode){return key}}return RTConst.UNKNOWN_CODE}function getTypeStringByType(type){for(const key in RTValueType){if(RTValueType[key]===type){return key}}return RTConst.UNKNOWN_TYPE}function isBigNumber(obj){return!!obj&&obj.isBigNumber}module.exports={getRandomUUID:getRandomUUID,getStatusStringByCode:getStatusStringByCode,getTypeStringByType:getTypeStringByType,isBigNumber:isBigNumber}},{"../RTConst":2,"../RTStatusCode":13,"../RTValueType":15,"uuid/v4":25}],17:[function(require,module,exports){const config=require("../config");const getOutput=type=>{if(config.DISABLE_LOGGING){return()=>null}return console[type]};const logger={warn:getOutput("warn"),info:getOutput("info"),debug:getOutput("debug"),error:getOutput("error")};module.exports=logger},{"../config":18}],18:[function(require,module,exports){module.exports={DISABLE_LOGGING:false}},{}],19:[function(require,module,exports){(function(globalObj){"use strict";var BigNumber,isNumeric=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,mathceil=Math.ceil,mathfloor=Math.floor,notBool=" not a boolean or binary digit",roundingMode="rounding mode",tooManyDigits="number type has more than 15 significant digits",ALPHABET="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_",BASE=1e14,LOG_BASE=14,MAX_SAFE_INTEGER=9007199254740991,POWS_TEN=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],SQRT_BASE=1e7,MAX=1e9;function constructorFactory(config){var div,parseNumeric,id=0,P=BigNumber.prototype,ONE=new BigNumber(1),DECIMAL_PLACES=20,ROUNDING_MODE=4,TO_EXP_NEG=-7,TO_EXP_POS=21,MIN_EXP=-1e7,MAX_EXP=1e7,ERRORS=true,isValidInt=intValidatorWithErrors,CRYPTO=false,MODULO_MODE=1,POW_PRECISION=0,FORMAT={decimalSeparator:".",groupSeparator:",",groupSize:3,secondaryGroupSize:0,fractionGroupSeparator:"Â ",fractionGroupSize:0};function BigNumber(n,b){var c,e,i,num,len,str,x=this;if(!(x instanceof BigNumber)){if(ERRORS)raise(26,"constructor call without new",n);return new BigNumber(n,b)}if(b==null||!isValidInt(b,2,64,id,"base")){if(n instanceof BigNumber){x.s=n.s;x.e=n.e;x.c=(n=n.c)?n.slice():n;id=0;return}if((num=typeof n=="number")&&n*0==0){x.s=1/n<0?(n=-n,-1):1;if(n===~~n){for(e=0,i=n;i>=10;i/=10,e++);x.e=e;x.c=[n];id=0;return}str=n+""}else{if(!isNumeric.test(str=n+""))return parseNumeric(x,str,num);x.s=str.charCodeAt(0)===45?(str=str.slice(1),-1):1}}else{b=b|0;str=n+"";if(b==10){x=new BigNumber(n instanceof BigNumber?n:str);return round(x,DECIMAL_PLACES+x.e+1,ROUNDING_MODE)}if((num=typeof n=="number")&&n*0!=0||!new RegExp("^-?"+(c="["+ALPHABET.slice(0,b)+"]+")+"(?:\\."+c+")?$",b<37?"i":"").test(str)){return parseNumeric(x,str,num,b)}if(num){x.s=1/n<0?(str=str.slice(1),-1):1;if(ERRORS&&str.replace(/^0\.0*|\./,"").length>15){raise(id,tooManyDigits,n)}num=false}else{x.s=str.charCodeAt(0)===45?(str=str.slice(1),-1):1}str=convertBase(str,10,b,x.s)}if((e=str.indexOf("."))>-1)str=str.replace(".","");if((i=str.search(/e/i))>0){if(e<0)e=i;e+=+str.slice(i+1);str=str.substring(0,i)}else if(e<0){e=str.length}for(i=0;str.charCodeAt(i)===48;i++);for(len=str.length;str.charCodeAt(--len)===48;);str=str.slice(i,len+1);if(str){len=str.length;if(num&&ERRORS&&len>15&&(n>MAX_SAFE_INTEGER||n!==mathfloor(n))){raise(id,tooManyDigits,x.s*n)}e=e-i-1;if(e>MAX_EXP){x.c=x.e=null}else if(e<MIN_EXP){x.c=[x.e=0]}else{x.e=e;x.c=[];i=(e+1)%LOG_BASE;if(e<0)i+=LOG_BASE;if(i<len){if(i)x.c.push(+str.slice(0,i));for(len-=LOG_BASE;i<len;){x.c.push(+str.slice(i,i+=LOG_BASE))}str=str.slice(i);i=LOG_BASE-str.length}else{i-=len}for(;i--;str+="0");x.c.push(+str)}}else{x.c=[x.e=0]}id=0}BigNumber.another=constructorFactory;BigNumber.ROUND_UP=0;BigNumber.ROUND_DOWN=1;BigNumber.ROUND_CEIL=2;BigNumber.ROUND_FLOOR=3;BigNumber.ROUND_HALF_UP=4;BigNumber.ROUND_HALF_DOWN=5;BigNumber.ROUND_HALF_EVEN=6;BigNumber.ROUND_HALF_CEIL=7;BigNumber.ROUND_HALF_FLOOR=8;BigNumber.EUCLID=9;BigNumber.config=BigNumber.set=function(){var v,p,i=0,r={},a=arguments,o=a[0],has=o&&typeof o=="object"?function(){if(o.hasOwnProperty(p))return(v=o[p])!=null}:function(){if(a.length>i)return(v=a[i++])!=null};if(has(p="DECIMAL_PLACES")&&isValidInt(v,0,MAX,2,p)){DECIMAL_PLACES=v|0}r[p]=DECIMAL_PLACES;if(has(p="ROUNDING_MODE")&&isValidInt(v,0,8,2,p)){ROUNDING_MODE=v|0}r[p]=ROUNDING_MODE;if(has(p="EXPONENTIAL_AT")){if(isArray(v)){if(isValidInt(v[0],-MAX,0,2,p)&&isValidInt(v[1],0,MAX,2,p)){TO_EXP_NEG=v[0]|0;TO_EXP_POS=v[1]|0}}else if(isValidInt(v,-MAX,MAX,2,p)){TO_EXP_NEG=-(TO_EXP_POS=(v<0?-v:v)|0)}}r[p]=[TO_EXP_NEG,TO_EXP_POS];if(has(p="RANGE")){if(isArray(v)){if(isValidInt(v[0],-MAX,-1,2,p)&&isValidInt(v[1],1,MAX,2,p)){MIN_EXP=v[0]|0;MAX_EXP=v[1]|0}}else if(isValidInt(v,-MAX,MAX,2,p)){if(v|0)MIN_EXP=-(MAX_EXP=(v<0?-v:v)|0);else if(ERRORS)raise(2,p+" cannot be zero",v)}}r[p]=[MIN_EXP,MAX_EXP];if(has(p="ERRORS")){if(v===!!v||v===1||v===0){id=0;isValidInt=(ERRORS=!!v)?intValidatorWithErrors:intValidatorNoErrors}else if(ERRORS){raise(2,p+notBool,v)}}r[p]=ERRORS;if(has(p="CRYPTO")){if(v===true||v===false||v===1||v===0){if(v){v=typeof crypto=="undefined";if(!v&&crypto&&(crypto.getRandomValues||crypto.randomBytes)){CRYPTO=true}else if(ERRORS){raise(2,"crypto unavailable",v?void 0:crypto)}else{CRYPTO=false}}else{CRYPTO=false}}else if(ERRORS){raise(2,p+notBool,v)}}r[p]=CRYPTO;if(has(p="MODULO_MODE")&&isValidInt(v,0,9,2,p)){MODULO_MODE=v|0}r[p]=MODULO_MODE;if(has(p="POW_PRECISION")&&isValidInt(v,0,MAX,2,p)){POW_PRECISION=v|0}r[p]=POW_PRECISION;if(has(p="FORMAT")){if(typeof v=="object"){FORMAT=v}else if(ERRORS){raise(2,p+" not an object",v)}}r[p]=FORMAT;return r};BigNumber.max=function(){return maxOrMin(arguments,P.lt)};BigNumber.min=function(){return maxOrMin(arguments,P.gt)};BigNumber.random=function(){var pow2_53=9007199254740992;var random53bitInt=Math.random()*pow2_53&2097151?function(){return mathfloor(Math.random()*pow2_53)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(dp){var a,b,e,k,v,i=0,c=[],rand=new BigNumber(ONE);dp=dp==null||!isValidInt(dp,0,MAX,14)?DECIMAL_PLACES:dp|0;k=mathceil(dp/LOG_BASE);if(CRYPTO){if(crypto.getRandomValues){a=crypto.getRandomValues(new Uint32Array(k*=2));for(;i<k;){v=a[i]*131072+(a[i+1]>>>11);if(v>=9e15){b=crypto.getRandomValues(new Uint32Array(2));a[i]=b[0];a[i+1]=b[1]}else{c.push(v%1e14);i+=2}}i=k/2}else if(crypto.randomBytes){a=crypto.randomBytes(k*=7);for(;i<k;){v=(a[i]&31)*281474976710656+a[i+1]*1099511627776+a[i+2]*4294967296+a[i+3]*16777216+(a[i+4]<<16)+(a[i+5]<<8)+a[i+6];if(v>=9e15){crypto.randomBytes(7).copy(a,i)}else{c.push(v%1e14);i+=7}}i=k/7}else{CRYPTO=false;if(ERRORS)raise(14,"crypto unavailable",crypto)}}if(!CRYPTO){for(;i<k;){v=random53bitInt();if(v<9e15)c[i++]=v%1e14}}k=c[--i];dp%=LOG_BASE;if(k&&dp){v=POWS_TEN[LOG_BASE-dp];c[i]=mathfloor(k/v)*v}for(;c[i]===0;c.pop(),i--);if(i<0){c=[e=0]}else{for(e=-1;c[0]===0;c.splice(0,1),e-=LOG_BASE);for(i=1,v=c[0];v>=10;v/=10,i++);if(i<LOG_BASE)e-=LOG_BASE-i}rand.e=e;rand.c=c;return rand}}();function convertBase(str,baseOut,baseIn,sign){var d,e,k,r,x,xc,y,i=str.indexOf("."),dp=DECIMAL_PLACES,rm=ROUNDING_MODE;if(baseIn<37)str=str.toLowerCase();if(i>=0){k=POW_PRECISION;POW_PRECISION=0;str=str.replace(".","");y=new BigNumber(baseIn);x=y.pow(str.length-i);POW_PRECISION=k;y.c=toBaseOut(toFixedPoint(coeffToString(x.c),x.e),10,baseOut);y.e=y.c.length}xc=toBaseOut(str,baseIn,baseOut);e=k=xc.length;for(;xc[--k]==0;xc.pop());if(!xc[0])return"0";if(i<0){--e}else{x.c=xc;x.e=e;x.s=sign;x=div(x,y,dp,rm,baseOut);xc=x.c;r=x.r;e=x.e}d=e+dp+1;i=xc[d];k=baseOut/2;r=r||d<0||xc[d+1]!=null;r=rm<4?(i!=null||r)&&(rm==0||rm==(x.s<0?3:2)):i>k||i==k&&(rm==4||r||rm==6&&xc[d-1]&1||rm==(x.s<0?8:7));if(d<1||!xc[0]){str=r?toFixedPoint("1",-dp):"0"}else{xc.length=d;if(r){for(--baseOut;++xc[--d]>baseOut;){xc[d]=0;if(!d){++e;xc=[1].concat(xc)}}}for(k=xc.length;!xc[--k];);for(i=0,str="";i<=k;str+=ALPHABET.charAt(xc[i++]));str=toFixedPoint(str,e)}return str}div=function(){function multiply(x,k,base){var m,temp,xlo,xhi,carry=0,i=x.length,klo=k%SQRT_BASE,khi=k/SQRT_BASE|0;for(x=x.slice();i--;){xlo=x[i]%SQRT_BASE;xhi=x[i]/SQRT_BASE|0;m=khi*xlo+xhi*klo;temp=klo*xlo+m%SQRT_BASE*SQRT_BASE+carry;carry=(temp/base|0)+(m/SQRT_BASE|0)+khi*xhi;x[i]=temp%base}if(carry)x=[carry].concat(x);return x}function compare(a,b,aL,bL){var i,cmp;if(aL!=bL){cmp=aL>bL?1:-1}else{for(i=cmp=0;i<aL;i++){if(a[i]!=b[i]){cmp=a[i]>b[i]?1:-1;break}}}return cmp}function subtract(a,b,aL,base){var i=0;for(;aL--;){a[aL]-=i;i=a[aL]<b[aL]?1:0;a[aL]=i*base+a[aL]-b[aL]}for(;!a[0]&&a.length>1;a.splice(0,1));}return function(x,y,dp,rm,base){var cmp,e,i,more,n,prod,prodL,q,qc,rem,remL,rem0,xi,xL,yc0,yL,yz,s=x.s==y.s?1:-1,xc=x.c,yc=y.c;if(!xc||!xc[0]||!yc||!yc[0]){return new BigNumber(!x.s||!y.s||(xc?yc&&xc[0]==yc[0]:!yc)?NaN:xc&&xc[0]==0||!yc?s*0:s/0)}q=new BigNumber(s);qc=q.c=[];e=x.e-y.e;s=dp+e+1;if(!base){base=BASE;e=bitFloor(x.e/LOG_BASE)-bitFloor(y.e/LOG_BASE);s=s/LOG_BASE|0}for(i=0;yc[i]==(xc[i]||0);i++);if(yc[i]>(xc[i]||0))e--;if(s<0){qc.push(1);more=true}else{xL=xc.length;yL=yc.length;i=0;s+=2;n=mathfloor(base/(yc[0]+1));if(n>1){yc=multiply(yc,n,base);xc=multiply(xc,n,base);yL=yc.length;xL=xc.length}xi=yL;rem=xc.slice(0,yL);remL=rem.length;for(;remL<yL;rem[remL++]=0);yz=yc.slice();yz=[0].concat(yz);yc0=yc[0];if(yc[1]>=base/2)yc0++;do{n=0;cmp=compare(yc,rem,yL,remL);if(cmp<0){rem0=rem[0];if(yL!=remL)rem0=rem0*base+(rem[1]||0);n=mathfloor(rem0/yc0);if(n>1){if(n>=base)n=base-1;prod=multiply(yc,n,base);prodL=prod.length;remL=rem.length;while(compare(prod,rem,prodL,remL)==1){n--;subtract(prod,yL<prodL?yz:yc,prodL,base);prodL=prod.length;cmp=1}}else{if(n==0){cmp=n=1}prod=yc.slice();prodL=prod.length}if(prodL<remL)prod=[0].concat(prod);subtract(rem,prod,remL,base);remL=rem.length;if(cmp==-1){while(compare(yc,rem,yL,remL)<1){n++;subtract(rem,yL<remL?yz:yc,remL,base);remL=rem.length}}}else if(cmp===0){n++;rem=[0]}qc[i++]=n;if(rem[0]){rem[remL++]=xc[xi]||0}else{rem=[xc[xi]];remL=1}}while((xi++<xL||rem[0]!=null)&&s--);more=rem[0]!=null;if(!qc[0])qc.splice(0,1)}if(base==BASE){for(i=1,s=qc[0];s>=10;s/=10,i++);round(q,dp+(q.e=i+e*LOG_BASE-1)+1,rm,more)}else{q.e=e;q.r=+more}return q}}();function format(n,i,rm,caller){var c0,e,ne,len,str;rm=rm!=null&&isValidInt(rm,0,8,caller,roundingMode)?rm|0:ROUNDING_MODE;if(!n.c)return n.toString();c0=n.c[0];ne=n.e;if(i==null){str=coeffToString(n.c);str=caller==19||caller==24&&ne<=TO_EXP_NEG?toExponential(str,ne):toFixedPoint(str,ne)}else{n=round(new BigNumber(n),i,rm);e=n.e;str=coeffToString(n.c);len=str.length;if(caller==19||caller==24&&(i<=e||e<=TO_EXP_NEG)){for(;len<i;str+="0",len++);str=toExponential(str,e)}else{i-=ne;str=toFixedPoint(str,e);if(e+1>len){if(--i>0)for(str+=".";i--;str+="0");}else{i+=e-len;if(i>0){if(e+1==len)str+=".";for(;i--;str+="0");}}}}return n.s<0&&c0?"-"+str:str}function maxOrMin(args,method){var m,n,i=0;if(isArray(args[0]))args=args[0];m=new BigNumber(args[0]);for(;++i<args.length;){n=new BigNumber(args[i]);if(!n.s){m=n;break}else if(method.call(m,n)){m=n}}return m}function intValidatorWithErrors(n,min,max,caller,name){if(n<min||n>max||n!=truncate(n)){raise(caller,(name||"decimal places")+(n<min||n>max?" out of range":" not an integer"),n)}return true}function normalise(n,c,e){var i=1,j=c.length;for(;!c[--j];c.pop());for(j=c[0];j>=10;j/=10,i++);if((e=i+e*LOG_BASE-1)>MAX_EXP){n.c=n.e=null}else if(e<MIN_EXP){n.c=[n.e=0]}else{n.e=e;n.c=c}return n}parseNumeric=function(){var basePrefix=/^(-?)0([xbo])(?=\w[\w.]*$)/i,dotAfter=/^([^.]+)\.$/,dotBefore=/^\.([^.]+)$/,isInfinityOrNaN=/^-?(Infinity|NaN)$/,whitespaceOrPlus=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(x,str,num,b){var base,s=num?str:str.replace(whitespaceOrPlus,"");if(isInfinityOrNaN.test(s)){x.s=isNaN(s)?null:s<0?-1:1}else{if(!num){s=s.replace(basePrefix,function(m,p1,p2){base=(p2=p2.toLowerCase())=="x"?16:p2=="b"?2:8;return!b||b==base?p1:m});if(b){base=b;s=s.replace(dotAfter,"$1").replace(dotBefore,"0.$1")}if(str!=s)return new BigNumber(s,base)}if(ERRORS)raise(id,"not a"+(b?" base "+b:"")+" number",str);x.s=null}x.c=x.e=null;id=0}}();function raise(caller,msg,val){var error=new Error(["new BigNumber","cmp","config","div","divToInt","eq","gt","gte","lt","lte","minus","mod","plus","precision","random","round","shift","times","toDigits","toExponential","toFixed","toFormat","toFraction","pow","toPrecision","toString","BigNumber"][caller]+"() "+msg+": "+val);error.name="BigNumber Error";id=0;throw error}function round(x,sd,rm,r){var d,i,j,k,n,ni,rd,xc=x.c,pows10=POWS_TEN;if(xc){out:{for(d=1,k=xc[0];k>=10;k/=10,d++);i=sd-d;if(i<0){i+=LOG_BASE;j=sd;n=xc[ni=0];rd=n/pows10[d-j-1]%10|0}else{ni=mathceil((i+1)/LOG_BASE);if(ni>=xc.length){if(r){for(;xc.length<=ni;xc.push(0));n=rd=0;d=1;i%=LOG_BASE;j=i-LOG_BASE+1}else{break out}}else{n=k=xc[ni];for(d=1;k>=10;k/=10,d++);i%=LOG_BASE;j=i-LOG_BASE+d;rd=j<0?0:n/pows10[d-j-1]%10|0}}r=r||sd<0||xc[ni+1]!=null||(j<0?n:n%pows10[d-j-1]);r=rm<4?(rd||r)&&(rm==0||rm==(x.s<0?3:2)):rd>5||rd==5&&(rm==4||r||rm==6&&(i>0?j>0?n/pows10[d-j]:0:xc[ni-1])%10&1||rm==(x.s<0?8:7));if(sd<1||!xc[0]){xc.length=0;if(r){sd-=x.e+1;xc[0]=pows10[(LOG_BASE-sd%LOG_BASE)%LOG_BASE];x.e=-sd||0}else{xc[0]=x.e=0}return x}if(i==0){xc.length=ni;k=1;ni--}else{xc.length=ni+1;k=pows10[LOG_BASE-i];xc[ni]=j>0?mathfloor(n/pows10[d-j]%pows10[j])*k:0}if(r){for(;;){if(ni==0){for(i=1,j=xc[0];j>=10;j/=10,i++);j=xc[0]+=k;for(k=1;j>=10;j/=10,k++);if(i!=k){x.e++;if(xc[0]==BASE)xc[0]=1}break}else{xc[ni]+=k;if(xc[ni]!=BASE)break;xc[ni--]=0;k=1}}}for(i=xc.length;xc[--i]===0;xc.pop());}if(x.e>MAX_EXP){x.c=x.e=null}else if(x.e<MIN_EXP){x.c=[x.e=0]}}return x}P.absoluteValue=P.abs=function(){var x=new BigNumber(this);if(x.s<0)x.s=1;return x};P.ceil=function(){return round(new BigNumber(this),this.e+1,2)};P.comparedTo=P.cmp=function(y,b){id=1;return compare(this,new BigNumber(y,b))};P.decimalPlaces=P.dp=function(){var n,v,c=this.c;if(!c)return null;n=((v=c.length-1)-bitFloor(this.e/LOG_BASE))*LOG_BASE;if(v=c[v])for(;v%10==0;v/=10,n--);if(n<0)n=0;return n};P.dividedBy=P.div=function(y,b){id=3;return div(this,new BigNumber(y,b),DECIMAL_PLACES,ROUNDING_MODE)};P.dividedToIntegerBy=P.divToInt=function(y,b){id=4;return div(this,new BigNumber(y,b),0,1)};P.equals=P.eq=function(y,b){id=5;return compare(this,new BigNumber(y,b))===0};P.floor=function(){return round(new BigNumber(this),this.e+1,3)};P.greaterThan=P.gt=function(y,b){id=6;return compare(this,new BigNumber(y,b))>0};P.greaterThanOrEqualTo=P.gte=function(y,b){id=7;return(b=compare(this,new BigNumber(y,b)))===1||b===0};P.isFinite=function(){return!!this.c};P.isInteger=P.isInt=function(){return!!this.c&&bitFloor(this.e/LOG_BASE)>this.c.length-2};P.isNaN=function(){return!this.s};P.isNegative=P.isNeg=function(){return this.s<0};P.isZero=function(){return!!this.c&&this.c[0]==0};P.lessThan=P.lt=function(y,b){id=8;return compare(this,new BigNumber(y,b))<0};P.lessThanOrEqualTo=P.lte=function(y,b){id=9;return(b=compare(this,new BigNumber(y,b)))===-1||b===0};P.minus=P.sub=function(y,b){var i,j,t,xLTy,x=this,a=x.s;id=10;y=new BigNumber(y,b);b=y.s;if(!a||!b)return new BigNumber(NaN);if(a!=b){y.s=-b;return x.plus(y)}var xe=x.e/LOG_BASE,ye=y.e/LOG_BASE,xc=x.c,yc=y.c;if(!xe||!ye){if(!xc||!yc)return xc?(y.s=-b,y):new BigNumber(yc?x:NaN);if(!xc[0]||!yc[0]){return yc[0]?(y.s=-b,y):new BigNumber(xc[0]?x:ROUNDING_MODE==3?-0:0)}}xe=bitFloor(xe);ye=bitFloor(ye);xc=xc.slice();if(a=xe-ye){if(xLTy=a<0){a=-a;t=xc}else{ye=xe;t=yc}t.reverse();for(b=a;b--;t.push(0));t.reverse()}else{j=(xLTy=(a=xc.length)<(b=yc.length))?a:b;for(a=b=0;b<j;b++){if(xc[b]!=yc[b]){xLTy=xc[b]<yc[b];break}}}if(xLTy)t=xc,xc=yc,yc=t,y.s=-y.s;b=(j=yc.length)-(i=xc.length);if(b>0)for(;b--;xc[i++]=0);b=BASE-1;for(;j>a;){if(xc[--j]<yc[j]){for(i=j;i&&!xc[--i];xc[i]=b);--xc[i];xc[j]+=BASE}xc[j]-=yc[j]}for(;xc[0]==0;xc.splice(0,1),--ye);if(!xc[0]){y.s=ROUNDING_MODE==3?-1:1;y.c=[y.e=0];return y}return normalise(y,xc,ye)};P.modulo=P.mod=function(y,b){var q,s,x=this;id=11;y=new BigNumber(y,b);if(!x.c||!y.s||y.c&&!y.c[0]){return new BigNumber(NaN)}else if(!y.c||x.c&&!x.c[0]){return new BigNumber(x)}if(MODULO_MODE==9){s=y.s;y.s=1;q=div(x,y,0,3);y.s=s;q.s*=s}else{q=div(x,y,0,MODULO_MODE)}return x.minus(q.times(y))};P.negated=P.neg=function(){var x=new BigNumber(this);x.s=-x.s||null;return x};P.plus=P.add=function(y,b){var t,x=this,a=x.s;id=12;y=new BigNumber(y,b);b=y.s;if(!a||!b)return new BigNumber(NaN);if(a!=b){y.s=-b;return x.minus(y)}var xe=x.e/LOG_BASE,ye=y.e/LOG_BASE,xc=x.c,yc=y.c;if(!xe||!ye){if(!xc||!yc)return new BigNumber(a/0);if(!xc[0]||!yc[0])return yc[0]?y:new BigNumber(xc[0]?x:a*0)}xe=bitFloor(xe);ye=bitFloor(ye);xc=xc.slice();if(a=xe-ye){if(a>0){ye=xe;t=yc}else{a=-a;t=xc}t.reverse();for(;a--;t.push(0));t.reverse()}a=xc.length;b=yc.length;if(a-b<0)t=yc,yc=xc,xc=t,b=a;for(a=0;b;){a=(xc[--b]=xc[b]+yc[b]+a)/BASE|0;xc[b]=BASE===xc[b]?0:xc[b]%BASE}if(a){xc=[a].concat(xc);++ye}return normalise(y,xc,ye)};P.precision=P.sd=function(z){var n,v,x=this,c=x.c;if(z!=null&&z!==!!z&&z!==1&&z!==0){if(ERRORS)raise(13,"argument"+notBool,z);if(z!=!!z)z=null}if(!c)return null;v=c.length-1;n=v*LOG_BASE+1;if(v=c[v]){for(;v%10==0;v/=10,n--);for(v=c[0];v>=10;v/=10,n++);}if(z&&x.e+1>n)n=x.e+1;return n};P.round=function(dp,rm){var n=new BigNumber(this);if(dp==null||isValidInt(dp,0,MAX,15)){round(n,~~dp+this.e+1,rm==null||!isValidInt(rm,0,8,15,roundingMode)?ROUNDING_MODE:rm|0)}return n};P.shift=function(k){var n=this;return isValidInt(k,-MAX_SAFE_INTEGER,MAX_SAFE_INTEGER,16,"argument")?n.times("1e"+truncate(k)):new BigNumber(n.c&&n.c[0]&&(k<-MAX_SAFE_INTEGER||k>MAX_SAFE_INTEGER)?n.s*(k<0?0:1/0):n)};P.squareRoot=P.sqrt=function(){var m,n,r,rep,t,x=this,c=x.c,s=x.s,e=x.e,dp=DECIMAL_PLACES+4,half=new BigNumber("0.5");if(s!==1||!c||!c[0]){return new BigNumber(!s||s<0&&(!c||c[0])?NaN:c?x:1/0)}s=Math.sqrt(+x);if(s==0||s==1/0){n=coeffToString(c);if((n.length+e)%2==0)n+="0";s=Math.sqrt(n);e=bitFloor((e+1)/2)-(e<0||e%2);if(s==1/0){n="1e"+e}else{n=s.toExponential();n=n.slice(0,n.indexOf("e")+1)+e}r=new BigNumber(n)}else{r=new BigNumber(s+"")}if(r.c[0]){e=r.e;s=e+dp;if(s<3)s=0;for(;;){t=r;r=half.times(t.plus(div(x,t,dp,1)));if(coeffToString(t.c).slice(0,s)===(n=coeffToString(r.c)).slice(0,s)){if(r.e<e)--s;n=n.slice(s-3,s+1);if(n=="9999"||!rep&&n=="4999"){if(!rep){round(t,t.e+DECIMAL_PLACES+2,0);if(t.times(t).eq(x)){r=t;break}}dp+=4;s+=4;rep=1}else{if(!+n||!+n.slice(1)&&n.charAt(0)=="5"){round(r,r.e+DECIMAL_PLACES+2,1);m=!r.times(r).eq(x)}break}}}}return round(r,r.e+DECIMAL_PLACES+1,ROUNDING_MODE,m)};P.times=P.mul=function(y,b){var c,e,i,j,k,m,xcL,xlo,xhi,ycL,ylo,yhi,zc,base,sqrtBase,x=this,xc=x.c,yc=(id=17,y=new BigNumber(y,b)).c;if(!xc||!yc||!xc[0]||!yc[0]){if(!x.s||!y.s||xc&&!xc[0]&&!yc||yc&&!yc[0]&&!xc){y.c=y.e=y.s=null}else{y.s*=x.s;if(!xc||!yc){y.c=y.e=null}else{y.c=[0];y.e=0}}return y}e=bitFloor(x.e/LOG_BASE)+bitFloor(y.e/LOG_BASE);y.s*=x.s;xcL=xc.length;ycL=yc.length;if(xcL<ycL)zc=xc,xc=yc,yc=zc,i=xcL,xcL=ycL,ycL=i;for(i=xcL+ycL,zc=[];i--;zc.push(0));base=BASE;sqrtBase=SQRT_BASE;for(i=ycL;--i>=0;){c=0;ylo=yc[i]%sqrtBase;yhi=yc[i]/sqrtBase|0;for(k=xcL,j=i+k;j>i;){xlo=xc[--k]%sqrtBase;xhi=xc[k]/sqrtBase|0;m=yhi*xlo+xhi*ylo;xlo=ylo*xlo+m%sqrtBase*sqrtBase+zc[j]+c;c=(xlo/base|0)+(m/sqrtBase|0)+yhi*xhi;zc[j--]=xlo%base}zc[j]=c}if(c){++e}else{zc.splice(0,1)}return normalise(y,zc,e)};P.toDigits=function(sd,rm){var n=new BigNumber(this);sd=sd==null||!isValidInt(sd,1,MAX,18,"precision")?null:sd|0;rm=rm==null||!isValidInt(rm,0,8,18,roundingMode)?ROUNDING_MODE:rm|0;return sd?round(n,sd,rm):n};P.toExponential=function(dp,rm){return format(this,dp!=null&&isValidInt(dp,0,MAX,19)?~~dp+1:null,rm,19)};P.toFixed=function(dp,rm){return format(this,dp!=null&&isValidInt(dp,0,MAX,20)?~~dp+this.e+1:null,rm,20)};P.toFormat=function(dp,rm){var str=format(this,dp!=null&&isValidInt(dp,0,MAX,21)?~~dp+this.e+1:null,rm,21);if(this.c){var i,arr=str.split("."),g1=+FORMAT.groupSize,g2=+FORMAT.secondaryGroupSize,groupSeparator=FORMAT.groupSeparator,intPart=arr[0],fractionPart=arr[1],isNeg=this.s<0,intDigits=isNeg?intPart.slice(1):intPart,len=intDigits.length;if(g2)i=g1,g1=g2,g2=i,len-=i;if(g1>0&&len>0){i=len%g1||g1;intPart=intDigits.substr(0,i);for(;i<len;i+=g1){intPart+=groupSeparator+intDigits.substr(i,g1)}if(g2>0)intPart+=groupSeparator+intDigits.slice(i);if(isNeg)intPart="-"+intPart}str=fractionPart?intPart+FORMAT.decimalSeparator+((g2=+FORMAT.fractionGroupSize)?fractionPart.replace(new RegExp("\\d{"+g2+"}\\B","g"),"$&"+FORMAT.fractionGroupSeparator):fractionPart):intPart}return str};P.toFraction=function(md){var arr,d0,d2,e,exp,n,n0,q,s,k=ERRORS,x=this,xc=x.c,d=new BigNumber(ONE),n1=d0=new BigNumber(ONE),d1=n0=new BigNumber(ONE);if(md!=null){ERRORS=false;n=new BigNumber(md);ERRORS=k;if(!(k=n.isInt())||n.lt(ONE)){if(ERRORS){raise(22,"max denominator "+(k?"out of range":"not an integer"),md)}md=!k&&n.c&&round(n,n.e+1,1).gte(ONE)?n:null}}if(!xc)return x.toString();s=coeffToString(xc);e=d.e=s.length-x.e-1;d.c[0]=POWS_TEN[(exp=e%LOG_BASE)<0?LOG_BASE+exp:exp];md=!md||n.cmp(d)>0?e>0?d:n1:n;exp=MAX_EXP;MAX_EXP=1/0;n=new BigNumber(s);n0.c[0]=0;for(;;){q=div(n,d,0,1);d2=d0.plus(q.times(d1));if(d2.cmp(md)==1)break;d0=d1;d1=d2;n1=n0.plus(q.times(d2=n1));n0=d2;d=n.minus(q.times(d2=d));n=d2}d2=div(md.minus(d0),d1,0,1);n0=n0.plus(d2.times(n1));d0=d0.plus(d2.times(d1));n0.s=n1.s=x.s;e*=2;arr=div(n1,d1,e,ROUNDING_MODE).minus(x).abs().cmp(div(n0,d0,e,ROUNDING_MODE).minus(x).abs())<1?[n1.toString(),d1.toString()]:[n0.toString(),d0.toString()];MAX_EXP=exp;return arr};P.toNumber=function(){return+this};P.toPower=P.pow=function(n,m){var k,y,z,i=mathfloor(n<0?-n:+n),x=this;if(m!=null){id=23;m=new BigNumber(m)}if(!isValidInt(n,-MAX_SAFE_INTEGER,MAX_SAFE_INTEGER,23,"exponent")&&(!isFinite(n)||i>MAX_SAFE_INTEGER&&(n/=0)||parseFloat(n)!=n&&!(n=NaN))||n==0){k=Math.pow(+x,n);return new BigNumber(m?k%m:k)}if(m){if(n>1&&x.gt(ONE)&&x.isInt()&&m.gt(ONE)&&m.isInt()){x=x.mod(m)}else{z=m;m=null}}else if(POW_PRECISION){k=mathceil(POW_PRECISION/LOG_BASE+2)}y=new BigNumber(ONE);for(;;){if(i%2){y=y.times(x);if(!y.c)break;if(k){if(y.c.length>k)y.c.length=k}else if(m){y=y.mod(m)}}i=mathfloor(i/2);if(!i)break;x=x.times(x);if(k){if(x.c&&x.c.length>k)x.c.length=k}else if(m){x=x.mod(m)}}if(m)return y;if(n<0)y=ONE.div(y);return z?y.mod(z):k?round(y,POW_PRECISION,ROUNDING_MODE):y};P.toPrecision=function(sd,rm){return format(this,sd!=null&&isValidInt(sd,1,MAX,24,"precision")?sd|0:null,rm,24)};P.toString=function(b){var str,n=this,s=n.s,e=n.e;if(e===null){if(s){str="Infinity";if(s<0)str="-"+str}else{str="NaN"}}else{str=coeffToString(n.c);if(b==null||!isValidInt(b,2,64,25,"base")){str=e<=TO_EXP_NEG||e>=TO_EXP_POS?toExponential(str,e):toFixedPoint(str,e)}else{str=convertBase(toFixedPoint(str,e),b|0,10,s)}if(s<0&&n.c[0])str="-"+str}return str};P.truncated=P.trunc=function(){return round(new BigNumber(this),this.e+1,1)};P.valueOf=P.toJSON=function(){var str,n=this,e=n.e;if(e===null)return n.toString();str=coeffToString(n.c);str=e<=TO_EXP_NEG||e>=TO_EXP_POS?toExponential(str,e):toFixedPoint(str,e);return n.s<0?"-"+str:str};P.isBigNumber=true;if(config!=null)BigNumber.config(config);return BigNumber}function bitFloor(n){var i=n|0;return n>0||n===i?i:i-1}function coeffToString(a){var s,z,i=1,j=a.length,r=a[0]+"";for(;i<j;){s=a[i++]+"";z=LOG_BASE-s.length;for(;z--;s="0"+s);r+=s}for(j=r.length;r.charCodeAt(--j)===48;);return r.slice(0,j+1||1)}function compare(x,y){var a,b,xc=x.c,yc=y.c,i=x.s,j=y.s,k=x.e,l=y.e;if(!i||!j)return null;a=xc&&!xc[0];b=yc&&!yc[0];if(a||b)return a?b?0:-j:i;if(i!=j)return i;a=i<0;b=k==l;if(!xc||!yc)return b?0:!xc^a?1:-1;if(!b)return k>l^a?1:-1;j=(k=xc.length)<(l=yc.length)?k:l;for(i=0;i<j;i++)if(xc[i]!=yc[i])return xc[i]>yc[i]^a?1:-1;return k==l?0:k>l^a?1:-1}function intValidatorNoErrors(n,min,max){return(n=truncate(n))>=min&&n<=max}function isArray(obj){return Object.prototype.toString.call(obj)=="[object Array]"}function toBaseOut(str,baseIn,baseOut){var j,arr=[0],arrL,i=0,len=str.length;for(;i<len;){for(arrL=arr.length;arrL--;arr[arrL]*=baseIn);arr[j=0]+=ALPHABET.indexOf(str.charAt(i++));for(;j<arr.length;j++){if(arr[j]>baseOut-1){if(arr[j+1]==null)arr[j+1]=0;arr[j+1]+=arr[j]/baseOut|0;arr[j]%=baseOut}}}return arr.reverse()}function toExponential(str,e){return(str.length>1?str.charAt(0)+"."+str.slice(1):str)+(e<0?"e":"e+")+e}function toFixedPoint(str,e){var len,z;if(e<0){for(z="0.";++e;z+="0");str=z+str}else{len=str.length;if(++e>len){for(z="0",e-=len;--e;z+="0");str+=z}else if(e<len){str=str.slice(0,e)+"."+str.slice(e)}}return str}function truncate(n){n=parseFloat(n);return n<0?mathceil(n):mathfloor(n)}BigNumber=constructorFactory();BigNumber["default"]=BigNumber.BigNumber=BigNumber;if(typeof define=="function"&&define.amd){define(function(){return BigNumber})}else if(typeof module!="undefined"&&module.exports){module.exports=BigNumber}else{if(!globalObj)globalObj=typeof self!="undefined"?self:Function("return this")();globalObj.BigNumber=BigNumber}})(this)},{}],20:[function(require,module,exports){var json_stringify=require("./lib/stringify.js").stringify;var json_parse=require("./lib/parse.js");module.exports=function(options){return{parse:json_parse(options),stringify:json_stringify}};module.exports.parse=json_parse();module.exports.stringify=json_stringify},{"./lib/parse.js":21,"./lib/stringify.js":22}],21:[function(require,module,exports){var BigNumber=null;var json_parse=function(options){"use strict";var _options={strict:false,storeAsString:false};if(options!==undefined&&options!==null){if(options.strict===true){_options.strict=true}if(options.storeAsString===true){_options.storeAsString=true}}var at,ch,escapee={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},text,error=function(m){throw{name:"SyntaxError",message:m,at:at,text:text}},next=function(c){if(c&&c!==ch){error("Expected '"+c+"' instead of '"+ch+"'")}ch=text.charAt(at);at+=1;return ch},number=function(){var number,string="";if(ch==="-"){string="-";next("-")}while(ch>="0"&&ch<="9"){string+=ch;next()}if(ch==="."){string+=".";while(next()&&ch>="0"&&ch<="9"){string+=ch}}if(ch==="e"||ch==="E"){string+=ch;next();if(ch==="-"||ch==="+"){string+=ch;next()}while(ch>="0"&&ch<="9"){string+=ch;next()}}number=+string;if(!isFinite(number)){error("Bad number")}else{if(BigNumber==null)BigNumber=require("bignumber.js");if(string.length>15)return _options.storeAsString===true?string:new BigNumber(string);return number}},string=function(){var hex,i,string="",uffff;if(ch==='"'){while(next()){if(ch==='"'){next();return string}if(ch==="\\"){next();if(ch==="u"){uffff=0;for(i=0;i<4;i+=1){hex=parseInt(next(),16);if(!isFinite(hex)){break}uffff=uffff*16+hex}string+=String.fromCharCode(uffff)}else if(typeof escapee[ch]==="string"){string+=escapee[ch]}else{break}}else{string+=ch}}}error("Bad string")},white=function(){while(ch&&ch<=" "){next()}},word=function(){switch(ch){case"t":next("t");next("r");next("u");next("e");return true;case"f":next("f");next("a");next("l");next("s");next("e");return false;case"n":next("n");next("u");next("l");next("l");return null}error("Unexpected '"+ch+"'")},value,array=function(){var array=[];if(ch==="["){next("[");white();if(ch==="]"){next("]");return array}while(ch){array.push(value());white();if(ch==="]"){next("]");return array}next(",");white()}}error("Bad array")},object=function(){var key,object={};if(ch==="{"){next("{");white();if(ch==="}"){next("}");return object}while(ch){key=string();white();next(":");if(_options.strict===true&&Object.hasOwnProperty.call(object,key)){error('Duplicate key "'+key+'"')}object[key]=value();white();if(ch==="}"){next("}");return object}next(",");white()}}error("Bad object")};value=function(){white();switch(ch){case"{":return object();case"[":return array();case'"':return string();case"-":return number();default:return ch>="0"&&ch<="9"?number():word()}};return function(source,reviver){var result;text=source+"";at=0;ch=" ";result=value();white();if(ch){error("Syntax error")}return typeof reviver==="function"?function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){Object.keys(value).forEach(function(k){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}})}return reviver.call(holder,key,value)}({"":result},""):result}};module.exports=json_parse},{"bignumber.js":19}],22:[function(require,module,exports){var BigNumber=require("bignumber.js");var JSON=module.exports;(function(){"use strict";function f(n){return n<10?"0"+n:n}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key],isBigNumber=value!=null&&(value instanceof BigNumber||value.isBigNumber);if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":if(isBigNumber){return value}else{return quote(value)}case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{Object.keys(value).forEach(function(k){var v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}})}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else if(typeof space==="string"){indent=space}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}})()},{"bignumber.js":19}],23:[function(require,module,exports){var byteToHex=[];for(var i=0;i<256;++i){byteToHex[i]=(i+256).toString(16).substr(1)}function bytesToUuid(buf,offset){var i=offset||0;var bth=byteToHex;return bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]}module.exports=bytesToUuid},{}],24:[function(require,module,exports){var getRandomValues=typeof crypto!="undefined"&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&msCrypto.getRandomValues.bind(msCrypto);if(getRandomValues){var rnds8=new Uint8Array(16);module.exports=function whatwgRNG(){getRandomValues(rnds8);return rnds8}}else{var rnds=new Array(16);module.exports=function mathRNG(){for(var i=0,r;i<16;i++){if((i&3)===0)r=Math.random()*4294967296;rnds[i]=r>>>((i&3)<<3)&255}return rnds}}},{}],25:[function(require,module,exports){var rng=require("./lib/rng");var bytesToUuid=require("./lib/bytesToUuid");function v4(options,buf,offset){var i=buf&&offset||0;if(typeof options=="string"){buf=options==="binary"?new Array(16):null;options=null}options=options||{};var rnds=options.random||(options.rng||rng)();rnds[6]=rnds[6]&15|64;rnds[8]=rnds[8]&63|128;if(buf){for(var ii=0;ii<16;++ii){buf[i+ii]=rnds[ii]}}return buf||bytesToUuid(rnds)}module.exports=v4},{"./lib/bytesToUuid":23,"./lib/rng":24}]},{},[1])(1)});
